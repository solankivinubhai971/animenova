(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[591],{2345:(e,t,s)=>{Promise.resolve().then(s.bind(s,6766))},6046:(e,t,s)=>{"use strict";var r=s(6658);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},6766:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5155),a=s(2115),n=s(6046),i=s(8173),l=s.n(i),o=s(5683),c=s(9124);function d(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),[s,i]=(0,a.useState)(null),[d,h]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{window.scrollTo({top:0,behavior:"instant"})},[e.chapter]),(0,a.useEffect)(()=>{let e=()=>{p(window.scrollY>400)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,a.useEffect)(()=>{(async()=>{try{let t=await fetch("https://mangabat-beta.vercel.app/api/manga/read/".concat(e.id,"/").concat(e.chapter),{cache:"no-store"});if(!t.ok)throw Error("Failed to fetch chapter");let s=await t.json();i(s)}catch(e){}finally{h(!1)}})()},[e.id,e.chapter]),(0,a.useEffect)(()=>((null==s?void 0:s.results)?document.title="Chapter ".concat(e.chapter," - ").concat(s.results.title):document.title="Loading Chapter...",()=>{document.title="Manga Reader"}),[s,e.chapter]),d)?(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"})}):s?(0,r.jsxs)("div",{className:"min-h-screen bg-black custom-scrollbar",children:[(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-[#0a0a0a]/95 backdrop-blur-sm border-b border-gray-800/50 z-[100] -mt-1",children:(0,r.jsxs)("div",{className:"h-20 px-3 sm:px-6 flex items-center justify-between max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-5",children:[(0,r.jsxs)("button",{onClick:()=>t.push("/manga/".concat(e.id)),className:"text-white/90 hover:text-white flex items-center gap-1.5 sm:gap-2.5 transition-colors px-2 sm:px-4 py-2 rounded-lg hover:bg-gray-800/50",children:[(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{className:"text-sm sm:text-base font-medium hidden xs:inline",children:"Back"})]}),(0,r.jsxs)("button",{onClick:()=>x(!m),className:"text-white/90 hover:text-white flex items-center gap-1.5 sm:gap-2.5 transition-colors px-2 sm:px-4 py-2 rounded-lg hover:bg-gray-800/50 ".concat(m?"bg-gray-800/50":""),children:[(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,r.jsx)("span",{className:"text-sm sm:text-base font-medium hidden xs:inline",children:"Chapters"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 sm:gap-4",children:[s.results.prevChapterId&&(0,r.jsxs)(l(),{href:"/manga/".concat(e.id,"/").concat(s.results.prevChapterId),className:"flex items-center gap-1 sm:gap-2 text-white/90 hover:text-white px-2 sm:px-4 py-2 rounded-lg hover:bg-gray-800/50 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,r.jsx)("span",{className:"text-sm sm:text-base font-medium hidden xs:inline",children:"Prev"})]}),(0,r.jsxs)("span",{className:"text-white/90 text-sm sm:text-base font-medium px-2 sm:px-3",children:["Ch. ",e.chapter]}),s.results.nextChapterId&&(0,r.jsxs)(l(),{href:"/manga/".concat(e.id,"/").concat(s.results.nextChapterId),className:"flex items-center gap-1 sm:gap-2 text-white/90 hover:text-white px-2 sm:px-4 py-2 rounded-lg hover:bg-gray-800/50 transition-colors",children:[(0,r.jsx)("span",{className:"text-sm sm:text-base font-medium hidden xs:inline",children:"Next"}),(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})}),(0,r.jsx)(o.N,{children:m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.P.div,{initial:{x:-320},animate:{x:0},exit:{x:-320},transition:{type:"spring",bounce:0,duration:.3},className:"fixed top-20 left-0 w-80 h-[calc(100vh-80px)] bg-[#0a0a0a]/95 backdrop-blur-sm z-[90] overflow-y-auto border-r border-gray-800/50  scrollbar-thin scrollbar-track-gray-900/50 scrollbar-thumb-gray-800 hover:scrollbar-thumb-gray-700  scrollbar-thumb-rounded-full scrollbar-track-rounded-full",children:[(0,r.jsx)("div",{className:"sticky top-0 bg-[#0a0a0a]/95 backdrop-blur-sm border-b border-gray-800/50 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-white/90",children:"Chapter List"}),(0,r.jsx)("button",{onClick:()=>x(!1),className:"p-2 text-white/70 hover:text-white rounded-lg hover:bg-gray-800/50 transition-colors","aria-label":"Close chapter list",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-4 space-y-1",children:s.results.chapterList.map(t=>(0,r.jsx)(l(),{href:"/manga/".concat(e.id,"/").concat(t.id),className:"block px-4 py-3 rounded-lg transition-all ".concat(t.isCurrent?"bg-red-900/30 text-white font-medium shadow-sm":"text-gray-300 hover:bg-gray-800/50 hover:text-white hover:translate-x-1"),onClick:()=>x(!1),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"truncate",children:t.title}),t.isCurrent&&(0,r.jsx)("span",{className:"flex-shrink-0 ml-2",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 100-16 8 8 0 000 16zm-1-7.208l2.793-2.792 1.414 1.414-3.5 3.5a1 1 0 01-1.414 0l-2-2 1.414-1.414L11 12.792z"})})})]})},t.id))})]}),(0,r.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/50 z-[80]",onClick:()=>x(!1)})]})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto -mt-1",children:s.results.images.map((e,t)=>(0,r.jsx)("div",{className:"relative w-full",children:(0,r.jsx)("img",{src:function(e,t){let s=e.split("?")[0];return"/api/proxy?url=".concat(encodeURIComponent(s),"&referrer=").concat(encodeURIComponent(t))}(e.image,s.referrer),alt:e.title,className:"w-full h-auto block",loading:"lazy"})},t))}),(0,r.jsx)(o.N,{children:u&&(0,r.jsx)(c.P.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-6 right-6 p-3 rounded-full bg-black/80 text-white/90 hover:text-white border border-gray-800/50 shadow-lg backdrop-blur-sm z-[100] transition-colors hover:bg-gray-800/50","aria-label":"Scroll to top",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})})})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-black",children:(0,r.jsx)("div",{className:"bg-red-900/30 rounded-lg p-4 text-center text-gray-300",children:"Unable to load chapter at this time"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[173,714,441,517,358],()=>t(2345)),_N_E=e.O()}]);